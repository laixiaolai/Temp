require([],function(){var t=function(){function t(){return"https:"==window.location.protocol?a:r}function e(e){l.fadeOut("fast"),$("#locale-nag-suggestion").hide(),l.fadeIn("fast"),$("#locale-nag-confirm").show(),$.ajax({type:"POST",url:t(),data:{_nnc:Etsy.csrf_nonce,suggested_currency_code:o.currency.code,suggested_language_code:o.language.code,suggested_region_code:o.region.code,currency_code:u.currency.code,language_code:u.language.code,region_code:u.region.code,geo_ip_country_code:c.geo_ip_country_code},dataType:"json",error:function(){alert("An error occurred while saving your locale preference. Please try again later.")},success:function(){Etsy.EventLogger.logEvent({php_event_name:"dismiss_locale_nag",action:e?"No thanks":"OK"}),setTimeout(function(){e?window.location.reload():l.fadeOut("slow")},3500)}})}function n(t){t.preventDefault();var n="cancel"==t.target.name;return n&&(u=s),e(n)}function i(t){t.preventDefault();var e=$("#locale-nag-message"),n=l.find(":submit[name=save]"),i=l.find(":submit[name=cancel]"),r=$(t.target),a=$("#locale-nag-confirm > h3");h=!h,h?(f||(f=e.html(),d=r.html(),p=n.val(),g=i.val(),m=a.html()),e.html(c.english_nag_message),$("#locale-nag-language").html(u.language.translation),$("#locale-nag-region").html(u.region.translation),n.val("Okay"),i.val("No thanks"),r.html("Show this message in "+u.language.translation),a.html(c.english_confirm_message)):(e.html(f),$("#locale-nag-language").html(u.language.name),$("#locale-nag-region").html(u.region.name),n.val(p),i.val(g),r.html(d),a.html(m))}var r="/api/v2/ajax/locale/preference",a="/api/v2/ajax/locale/preference-secure",s={currency:{code:"USD"},language:{code:"en-US"},region:{code:"XX"}},o=null,u=null,l=null,c={},h=!1,d="",f="",p="",g="",m="";return{init:function(t){c=$.extend(c,t||{}),u=c.locale||s,o=u,l=$("#locale-nag"),l.find(":submit").bind("click",n);var e=$("#locale-nag-language-switch");u.language.code==s.language.code?e.hide():e.bind("click",i),l.fadeIn("fast"),Etsy.EventLogger.logEvent({php_event_name:"view_locale_nag",suggested_language:o.language.code,suggested_currency:o.currency.code,suggested_region:o.region.code,geo_code:c.geo_ip_country_code})}}},e=t(),n=$("#locale-nag-options").html(),i=n?JSON.parse(n):{};e.init(i)});