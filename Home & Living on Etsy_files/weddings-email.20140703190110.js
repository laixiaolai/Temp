!function(t,e){e.WeddingsEmail={init:function(){var n=!1,i=e.Context.data.weddings_email_transient_key;if(e.isSignedIn()){var r=t("#weddings-email-signup-confirm-overlay");if(r.length>0){e.eraseTransientValue(i);var s=t.extend({},e.Overlay.options,{load:!0});r.overlay(s),r.hasClass("reconfirm")||window.setTimeout(function(){r.data("overlay").close()},2500)}}else t(".email-subscribe-trigger").click(function(){n=!0}),t(document.body).on("inlineoverlay:close","#inline-overlay",function(){n=!1}),t(document.body).on("inlineoverlay:submit","#inline-overlay",function(){n&&e.setTransientValue(i,!0)});this.initSignedInButton()},initSignedInButton:function(){t("#weddings-email-signup").on("submit","form",function(e){e.preventDefault(),t(this).find(".button-large").hide().end().find(".spinner-large").show(),t.post("/browse/weddings-email",t(this).serialize()).done(_.bind(function(){t(this).find(".spinner-large").hide();var e=t("#weddings-email-signup").find(".success").show().end().find(".initial").hide().end();_(function(){e.fadeOut()}).delay(2e3)},this))})}}}(jQuery,window.Etsy);